<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
	<h:head>
		<h:outputStylesheet library="css" name="estilos.css"/>
		<meta charset="UTF-8" />
		<title>Meu financeiro</title>
	</h:head>
	<h:body>

		<h1>Financeiro</h1>
	
		<br/>
		<br/>
		
		<div id="menu" class="form-container">
			<h:form>
				<h:outputLabel value="Mês selecionado: " for="selectMes" />
				<h:selectOneMenu id="selectMes" value="#{indexBean.mesSelecionado}">
					<f:selectItems value="#{indexBean.meses}" var="mes" itemLabel="#{mes}" itemValue="#{mes}"/>
					<f:ajax event="change" render="tabelaDividas" listener="#{indexBean.eventoDeSelecaoDoMes}" />
				</h:selectOneMenu>
			</h:form>
			
			<h:form>
				<h:commandButton styleClass="h-commandButton" 
					value="Setor fechamento mensal >>" 
					action="#{indexBean.telaDeFechamentoMensal}"
					style="background-color: green;"/>
			</h:form>
		</div>
		
		<br/>
		<br/>
		
		<div class="table">
			<h:dataTable id="tabelaDividas" styleClass="centralized-table" value="#{indexBean.dividas}" var="divida">
				<h:column>
					<f:facet name="header">
						<h:form>
							<h:commandButton value="Nova divida"
								action="#{indexBean.telaDeCadastro}"
								styleClass="h-commandButton" 
								style="background-color: blue;"/>
						</h:form>
					</f:facet>
					<h:form>
					    <h:commandButton value="Editar"
					    	action="#{indexBean.editarDivida(divida)}"
					    	styleClass="h-commandButton" 
		                    style="background-color: dodgerblue;"/>
								
					    <h:commandButton styleClass="h-commandButton" 
					    	value="Excluir Item" 
					    	action="#{indexBean.excluirDivida(divida)}"
					    	style="background-color: red;"
					    	onclick="return confirm('Tem certeza de que deseja excluir este item?');"
					    	render="tabelaDividas"/>
					</h:form>
				</h:column>
				<h:column>
					<f:facet name="header" >
						<h:outputText value="Descrição"/>
					</f:facet>
					<h:outputText value="#{divida.descricao}"/>
				</h:column>
				<h:column>
					<f:facet name="header" >
						<h:outputText value="Valor"/>
					</f:facet>
					<h:outputText value="#{divida.valor}"/>
				</h:column>
				<h:column>
					<f:facet name="header" >
						<h:outputText value="Data"/>
					</f:facet>
					<h:outputText value="#{divida.dataFormatada}"/>
				</h:column>
				<h:column>
					<f:facet name="header" >
						<h:outputText value="Mês referencia"/>
					</f:facet>
					<h:outputText value="#{divida.mes}"/>
				</h:column>
				<h:column>
					<f:facet name="header" >
						<h:outputText value="Categoria"/>
					</f:facet>
					<h:outputText value="#{divida.categoria}"/>
				</h:column>
				<h:column>
					<f:facet name="header" >
						<h:outputText value="Ano"/>
					</f:facet>
					<h:outputText value="#{divida.ano}"/>
				</h:column>
			</h:dataTable>
		</div>
	</h:body>
</html>